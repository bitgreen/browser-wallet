<!--
    An example: 
    - to transfer 1 Bitgreen
    - make a Signature and receive an authentication token

    ## Attention: the example need to be used from https, it does not work opened locally because of the check on target origin (window.location.href)
    ## to use locally you should replace the parameter window.location.href with "*".
-->
<html>
  <h1>Examples for Browser Wallet</h1>
  <hr>
  <h3>Here the basic examples to call the functions of the Browser Wallet.</h3>
  <hr>
  <button id="transferbutton">Transfer 1 Bitgreen</button>
  <button id="signinbutton">Sign In</button>
  <!-- include hte BitgreenWallet library-->
  <script type="text/javascript" src="BrowserWallet.js"></script>
  <script>
    // remove previous signin session
    sessionStorage.removeItem("bitgreenwallet");
    // create class object for BitGreen Wallet
    let BW= new BitgreenWallet();
    let button = document.getElementById("transferbutton");
    button.addEventListener("click", () =>{
      // send 1 BBB to a recipient
       BW.send("5HVfcSujPyT2hisdLDQhHXzCDx2e37UBM3h9fW65qkHx4FbN",1);
    }, false);
    let button2 = document.getElementById("signinbutton");
    button2.addEventListener("click", () =>{
        // authenticate signing a random message
        BW.authenticate(callbackauthentication);
    }, false);
    // function called after the signing
    function callbackauthentication(){
        // the token is stored in the session variable "bitgreen".
        console.log("Authentication token: ",sessionStorage.getItem("bitgreenwallet"));
    }
  </script>
  
</html>
